<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <Fallback>
      <!-- 停止状態の管理 -->
      <ReactiveSequence>
        <CheckBlackboard key="is_paused" default_value="false"/>
        <WaitForService service_name="resume_robot_service" service_type="std_srvs/srv/Trigger"/>
      </ReactiveSequence>
      <!-- メインのナビゲーション処理 -->
      <ReactiveSequence>
        <PipelineSequence name="NavigateWithReplanning">
          <RateController hz="1.0">
            <Sequence>
              <GoalUpdater input_goal="{goal}" output_goal="{updated_goal}">
                <ComputePathToPose goal="{updated_goal}" path="{path}" planner_id="GridBased"/>
              </GoalUpdater>
              <TruncatePath distance="1.0" input_path="{path}" output_path="{truncated_path}"/>
            </Sequence>
          </RateController>
          <KeepRunningUntilFailure>
            <FollowPath path="{truncated_path}" controller_id="FollowPath"/>
          </KeepRunningUntilFailure>
        </PipelineSequence>
      </ReactiveSequence>
    </Fallback>
  </BehaviorTree>
</root>